<style>:root{--primary: #1291f9;--primary-dark: #2c48d5;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}@font-face{font-display:optional;font-family:"Inter UI";font-weight:100 900;font-style:oblique 0deg 10deg;src:url(/fonts/Inter-3.19.var.woff2) format("woff2")}button,html{line-height:1.15}html{-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}body{margin:0}h1{font-size:3em;line-height:1.25;margin:.67em 0 .5em;font-size:2.074rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}b,strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}button{font-family:inherit;font-size:100%;overflow:visible;text-transform:none}[type=button],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}progress{vertical-align:baseline}template{display:none}h2{font-size:2.5em;line-height:1.2;margin-bottom:.6em}h3{font-size:2em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem}h4{font-size:1.5em;margin-bottom:1em;line-height:1.5em}body,p,pre,ul{font-size:1em}p,pre,ul{margin-bottom:1.5em}h1,h2,h3,h4{line-height:2.4rem;margin-bottom:1.36rem}h2{font-size:1.728rem}h3,h4{line-height:1.6rem}h4{font-size:1.2rem}body,p,pre,ul{font-size:1rem;line-height:1.6}p,pre,ul{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:4.3978rem;line-height:4.4rem}h2{font-size:3.1097rem;line-height:3.52rem}h3{font-size:2.1989rem;line-height:2.64rem}h4{font-size:1.5554rem;line-height:1.76rem}body,p,pre,ul{font-size:1.1rem;line-height:1.6}h1,h2,h3,h4,p,pre,ul{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:3.0756rem}h2{font-size:3.05rem;line-height:4.8rem}h3{font-size:1.7rem;line-height:1.88rem}h4{font-size:1.2rem;line-height:1.1rem}body,p,pre,ul{font-size:1.2rem;line-height:1.6}h1,h2,h3,h4,p,pre,ul{margin-bottom:1.632rem}}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre:has(code:not([class])){background:#2d2d2d}pre code:not([class]){color:#ccc;padding:0;overflow-x:scroll}button,code{border-radius:.3em}code{color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}h1,h2,h3,h4{font-family:var(--font-family)}h2,h4{font-style:italic}a:hover{text-decoration:underline}button{max-width:100%;background:#f2f2f2;color:#191919;cursor:pointer;display:inline-block;padding:.75em 1.5em;text-align:center;margin:0 .75em 1.5em 0}button:hover{background:#d9d9d9;color:#000}button:not([disabled]){background:#f9c412;color:#181818;background:var(--primary)}button:not([disabled]):hover{background:#ba9005;color:#000;background:var(--primary-dark)}*{border:0;box-sizing:border-box}body{font-family:var(--font-family);background:#181818;color:#eee}main{max-width:70rem;margin:0 auto;border-top:.5px solid #ccc}ul{margin-top:0}li ul{margin-bottom:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]{padding:0}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.punctuation{color:#ccc}.token.property{color:#f8c555}.token.selector{color:#cc99cd}.token.url{color:#67cdcc}</style><h1 id=eleventy-high-performance-blog>eleventy-high-performance-blog <a href=#eleventy-high-performance-blog class=direct-link>#</a></h1><p>A starter repository for building a blog with the <a href=https://www.11ty.dev/ >Eleventy static site generator</a> implementing a wide range of performance best practices.<p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZD23kJ-1920w.avif 1920w, /img/remote/ZD23kJ-1280w.avif 1280w, /img/remote/ZD23kJ-640w.avif 640w, /img/remote/ZD23kJ-320w.avif 320w" type=image/avif><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZD23kJ-1920w.webp 1920w, /img/remote/ZD23kJ-1280w.webp 1280w, /img/remote/ZD23kJ-640w.webp 640w, /img/remote/ZD23kJ-320w.webp 320w" type=image/webp><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/remote/ZD23kJ-1920w.png 1920w, /img/remote/ZD23kJ-1280w.png 1280w, /img/remote/ZD23kJ-640w.png 640w, /img/remote/ZD23kJ-320w.png 320w" type=image/png><img alt="Screenshot showing that the site achieves 100 points on Lighthouse by default" src=/img/remote/ZD23kJ-1920w.png decoding=async height=322 loading=lazy style="background-size:cover;background-image:url(&#34;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 902 322'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAFCAYAAACeuGYRAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAy0lEQVQYlR2OTUvDQBiE8/9/ixcPHgQ91YOgFooKRdE2iTZN3GyymzTZzX48kh0YZgbmfZmsXhQH07Bi9IbP+cwUbMrfpuHP6eSrpSc3ghgj2Z165Vo+8WUa3qaSq/aRl/FAbgU33ZbbfofyM6nXPXM0gmx7ObIZ9ugwU9qWe/1OYQXazzyMH+ymAhdDerTRe3o/kdVNw6mumMYLWmny35KulRChOP3QK5Xm6WFAdG3ymXeOlc57vPe4xSW11lJXZ6SU6z0xRGIIRCL/GR/1ofupSDIAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&#34;)" width=902></picture><p>Based on the awesome <a href=https://github.com/11ty/eleventy-base-blog>eleventy-base-blog</a>.<h2 id=demo>Demo <a href=#demo class=direct-link>#</a></h2><p><a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fgoogle%2Feleventy-high-performance-blog"><img alt="Deploy with Vercel" src=https://vercel.com/button></a><ul><li><a href=https://eleventy-high-performance-blog-sample.industrialempathy.com/ >Demo</a><li><a href=https://www.industrialempathy.com/ >Original site this template was based on</a></ul><h2 id=getting-started>Getting Started <a href=#getting-started class=direct-link>#</a></h2><h3 id=1.-generate-a-new-repository-from-this-repository-template>1. Generate a new repository from this repository template <a href=#1.-generate-a-new-repository-from-this-repository-template class=direct-link>#</a></h3><p>Click the <a href=https://github.com/google/eleventy-high-performance-blog/generate>"Use this template"</a> button. Alternatively you can clone this repo yourself and push your copy to your favorite git repository.<h3 id=2.-clone-your-new-repository>2. Clone your new repository <a href=#2.-clone-your-new-repository class=direct-link>#</a></h3><pre><code>git clone https://github.com/YOUR_REPO
</code></pre><h3 id=3.-navigate-to-the-directory>3. Navigate to the directory <a href=#3.-navigate-to-the-directory class=direct-link>#</a></h3><pre><code>cd my-blog-name
</code></pre><h3 id=4.-install-dependencies>4. Install dependencies <a href=#4.-install-dependencies class=direct-link>#</a></h3><pre><code>npm install
</code></pre><h3 id=5.-build%2C-serve%2C-watch-and-test>5. Build, serve, watch and test <a href=#5.-build%2C-serve%2C-watch-and-test class=direct-link>#</a></h3><pre><code>npm run watch
</code></pre><h3 id=6.-build-and-test>6. Build and test <a href=#6.-build-and-test class=direct-link>#</a></h3><pre><code>npm run build
</code></pre><h2 id=customize>Customize <a href=#customize class=direct-link>#</a></h2><ul><li>Search for "Update me" across files in your editor to find all the site specific things you should update.<li>Update the favicons in 'img/favicon/'.<li>Otherwise: Knock yourself out. This is a template repository.<li>For a simple color override, adjust these CSS variables at the top of <code>css/main.css</code>.</ul><pre class=language-css><code class=language-css><span class="token selector">:root</span> <span class="token punctuation">{</span><br>  <span class="token property">--primary</span><span class="token punctuation">:</span> #e7bf60<span class="token punctuation">;</span><br>  <span class="token property">--primary-dark</span><span class="token punctuation">:</span> #f9c412<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2 id=features>Features <a href=#features class=direct-link>#</a></h2><h3 id=performance-outcomes>Performance outcomes <a href=#performance-outcomes class=direct-link>#</a></h3><ul><li>Perfect score in applicable lighthouse audits (including accessibility).<li>Single HTTP request to <a href=https://web.dev/first-contentful-paint/ >First Contentful Paint</a>.<li>Very optimized <a href=https://web.dev/lcp/ >Largest Contentful Paint</a> (score depends on image usage, but images are optimized).<li>0 <a href=https://web.dev/cls/ >Cumulative Layout Shift</a>.<li>~0 <a href=https://web.dev/fid/ >First Input Delay</a>.</ul><h3 id=performance-optimizations>Performance optimizations <a href=#performance-optimizations class=direct-link>#</a></h3><h4 id=images>Images <a href=#images class=direct-link>#</a></h4><ul><li>Generates multiple sizes of each image and uses them in <strong><code>srcset</code></strong>.<li>Generates a <strong>blurry placeholder</strong> for each image (without adding an HTML element or using JS).<li>Transcodes images to <a href=https://en.wikipedia.org/wiki/AV1#AV1_Image_File_Format_(AVIF)>AVIF</a> and <a href=https://developers.google.com/speed/webp>webp</a> and generates <code>picture</code> element.<li>Transcodes GIFs to muted looping autoplaying MP4 videos for greatly reduced file size.<li><strong>Lazy loads</strong> images (using <a href=https://web.dev/native-lazy-loading/ >native <code>loading=lazy</code></a>).<li><strong>Async decodes</strong> images (using <code>decoding=async</code>).<li><strong>Lazy layout</strong> of images and placeholders using <a href=https://web.dev/content-visibility/#skipping-rendering-work-with-content-visibility><code>content-visibility: auto</code></a>.<li><strong>Avoids CLS impact</strong> of images by inferring and providing width and height (Supported in Chrome, Firefox and Safari 14+).<li>Downloads remote images and stores/serves them locally.<li>Immutable URLs.</ul><h4 id=css>CSS <a href=#css class=direct-link>#</a></h4><ul><li>Defaults to the compact "classless" <a href=https://kimeiga.github.io/bahunya/ >Bahunya CSS framework</a>.<li>Inlines CSS.<li>Dead-code-eliminates / tree-shakes / purges (pick your favorite word) unused CSS on a per-page basis with <a href=https://purgecss.com/ >PurgeCSS</a>.<li>Minified CSS with <a href=https://www.npmjs.com/package/csso>csso</a>.</ul><h4 id=miscellaneous>Miscellaneous <a href=#miscellaneous class=direct-link>#</a></h4><ul><li>Immutable URLs for JS.<li>Sets immutable caching headers for images, fonts, and JS (CSS is inlined). Automatically configured when deploying on <a href=https://vercel.com/ >Vercel</a><li>Uses <a href=https://www.npmjs.com/package/html-minifier>html-minifier</a> with aggressive options.<li>Uses <a href=https://rollupjs.org/ >rollup</a> to bundle JS and minifies it with <a href=https://terser.org/ >terser</a>.<li>Prefetches same-origin navigations when a navigation is likely.<li>If an AMP files is present, <a href=https://amp.dev/documentation/guides-and-tutorials/optimize-and-measure/optimize_amp/ >optimizes it</a>.</ul><h4 id=fonts>Fonts <a href=#fonts class=direct-link>#</a></h4><ul><li>Serves fonts from same origin.<li>Makes fonts <code>display:optional</code>.</ul><h4 id=analytics>Analytics <a href=#analytics class=direct-link>#</a></h4><ul><li>Supports locally serving Google Analytics's JS and proxying it's hit requests to a Vercel Edge Function (other proxies could be easily added).<li>Supports sending <a href=https://web.dev/vitals/ >Core Web Vitals</a> metrics to Google Analytics as <a href=https://github.com/GoogleChrome/web-vitals#send-the-results-to-google-analytics>events</a>.<li>Support for noscript hit requests.<li>Avoids blocking onload on analytics requests.<li>To turn this on, specify <code>googleAnalyticsId</code> in <code>metadata.json</code>. (Note, that this is not compatible with the not-yet-commonly used version 4 of Google Analytics.)</ul><h3 id=dx-features>DX features <a href=#dx-features class=direct-link>#</a></h3><ul><li>Uses 🚨 as favicon during local development.<li>Supports a range of default tests.<li>Runs build and tests on <code>git push</code>.<li>Sourcemap generated for JS.</ul><h3 id=seo-%26-social>SEO & Social <a href=#seo-%26-social class=direct-link>#</a></h3><ul><li>Share button preferring <code>navigator.share()</code> and falling back to Twitter. Using OS-like share-icon.<li>Support for OGP metadata.<li>Support for Twitter metadata.<li>Support for <a href=http://schema.org>schema.org</a> JSON-LD.<li>Sitemap.xml generation.</ul><h3 id=largely-useless-glitter>Largely useless glitter <a href=#largely-useless-glitter class=direct-link>#</a></h3><ul><li>Read time estimate.<li>Animated scroll progress bar…<li>…with an optimized implementation that should never cause a layout.</ul><h3 id=security>Security <a href=#security class=direct-link>#</a></h3><p>Generates a strong <a href=https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP>Content-Security-Policy (CSP)</a> for the base template.<ul><li>Default-src is self.<li>Disallows plugins.<li>Generates hash based CSP for the JS used on the site.<li>To extend the CSP with new rules, see <a href=https://github.com/google/eleventy-high-performance-blog/blob/main/_data/csp.js#L22>CSP.js</a></ul><h3 id=build-performance>Build performance <a href=#build-performance class=direct-link>#</a></h3><ul><li>Downloaded remote images, and generated sizes are cached in the local filesystem…<li>…and SHOULD be committed to git.<li><code>.persistimages.sh</code> helps with this.</ul><h2 id=disclaimer>Disclaimer <a href=#disclaimer class=direct-link>#</a></h2><p>This is not an officially supported Google product, but rather <a href=https://twitter.com/cramforce>Malte's</a> private best-effort open-source project.